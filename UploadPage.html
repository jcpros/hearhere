<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Add A Mark - Upload</title>
        <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>
        <link href ="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel = "stylesheet">
        <link href ="UploadPagesStyle.css" rel = "stylesheet">
        <script id="search-js" defer src="https://api.mapbox.com/search-js/v1.0.0-beta.21/web.js"></script>
        <!-- <script src="Audio_Data_Manage.js"> </script> -->
    </head>

    <body>
    <div class = "container">  
        <h1 class = "text-center">Leave Your Mark!</h1> 
        <form id = "markUpload">
            <div class = "form-group formMargin">
                <label for="markName">Mark Name</label>
                <input type="text" id ="markName" name = "markName" placeholder = "Enter your Mark Name">
            </div>
            <div class = "form-group formMargin">
                <label for="audioFile"> Audio File </label>
                <input type = "file" id = "audioFile" name = "audioFile">
            </div>
            <div class = "form-group formMargin">
                <p><label for="markDescription">Mark Description</label></p>
                <textarea id ="markDescription" name = "markDescription" rows="4" cols="50">
                    What did you hear? Describe it!
                </textarea>
            </div>
            <div>
                <mapbox-geocoder
                    access-token = "pk.eyJ1IjoiamNwcm9zIiwiYSI6ImNtMjU1Zm1veDBudnEyam9ncnFra28wa2IifQ.utYAfHsGc_duaDo5Of73NQ"
                    proximity = "0,0" ></mapbox-geocoder>
            </div>
            <button type="submit" class="btn btn-primary">Add a Mark</button>
        </form>
    </div>

        <!-- Javascript -->
    <script>
        const firebaseConfig = {
        apiKey: "AIzaSyC_i9oLLek-pVzabC7dZjOp7vH-Go8l1VA",
        authDomain: "hearhere-3ff05.firebaseapp.com",
        databaseURL: "https://hearhere-3ff05-default-rtdb.firebaseio.com",
        projectId: "hearhere-3ff05",
        storageBucket: "hearhere-3ff05.appspot.com",
        messagingSenderId: "846889701102",
        appId: "1:846889701102:web:9551d80c8c599f5945edff",
        measurementId: "G-TK14LVK21M"
    };

    firebase.initializeApp(firebaseConfig);
    // Load Search API


    //Takes the mark upload form 
    const form = document.getElementById("markUpload");   
    //Submit the mark + store mark info into variables
    form.addEventListener("submit", function(event){
    event.preventDefault(); 
    //Sets the variables for storing
    const markName = document.getElementById("markName").value;
    const audioFile  = document.getElementById("audioFile").value;
    const markDescription = document.getElementById("markDescription").value;
    //Save data to Firebase
    firebase.database().ref("markUpload").push({
    markName: markName,
    markDescription: markDescription,
    audioFile: audioFile,
     });
    });

    
    </script>





</body>
</html>